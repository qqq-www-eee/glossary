### Используемые понятия

1. **Наименование работы** - обозначение для строительной работы, доступной в данной шахматке (доступной к исполнению на объекте).
2. **Группа работ** или **Вид работ** - несколько наименований работ, объединенных пользователем по какому-то принципу. Отображается в UI как папка. Сейчас система позволяет создавать только один уровень вложенности, по бизнесу соответствующий "Виду работ". Для большей вложенности более корректным названием для папки будет группа работ.
3. **Работа** (таска) - задача по проведению конкретного наименования работ, для данного исполнителя, в определенном помещении.
4. **Список работ** - название раздела web-приложения, отвечающего за настройку переченя работ в шахматке (работ на объекте).
5. **Пользовательский список работ** - перечень наименований работ, доступных данному пользователю. Из них пользователь выбирает наименования работ для своих шахматок. 
6. **Список работ шахматки** - перечень наименований работ данного объекта (шахматки).
7. **Дефолтный список работ** - универсальный стартовый шаблон, порождающий пользовательский список работ на старте взаимодействия пользователя с системой.

### Макеты

1. [Стартовый экран - список работ шахматки не настроен](https://app.zeplin.io/project/63189e67cde56b49dacec5e2/screen/63d101a3db0baa7996b68f10):
    - слева - **область пользовательских работ**;
    - справа - **область работ шахматки**.
2. [Список работ шахматки настроен](https://app.zeplin.io/project/63189e67cde56b49dacec5e2/screen/63d101a7f602847abe046714).

### Предложения по БД

Определить таблицу work под под список работ шахматки.
Новую таблицу (что-то в духе user_work_list или basic_work_list или user_work) создать под пользовательские справочники.

> Работа не может жить без помещения или без наименования работ. При удалении работы из work, она все еще остается в основной сущности - user_work_list. Если привязываться к user_work_list, то мы даже soft-delete можем сделать. Но во-первых не хотим перегружать логику. Во-вторых основная проблема в том, что когда работа ушла отдыхать в user_work_list, либо таска пересоздастся, либо в старой таске пропишется новая работа. Так или иначе, при возврате работы в список работ шахматки, ее некуда будет цеплять. Две таски в одном помещении считаем жить не могут. Плюс у нас будет версионирование и откат. Так что есть смысл удалять жестко.

> должны ли удаляться таски с удалением работы? Так я хотя бы смогу ее откорректировать.
> тогда у нас что при закрытии нарядов будет? Работа сменила свое название в какой-то момент - и нас это совершенно не колышит? Это нормально? 
> С другой стороны, если таска перестанет существовать, то мы рискуем просто-напросто потерять кусок работы в нарядах? Поэтому либо коллекционировать все таски, какие побывали в этой комнате, либо пусть его - название поменялось, а нам все равно????? Нет. Мы до нее больше тупо не сможем доступиться... из левой панели. А из нарядов сможем. ПОчему нет.

### Функциональные требования

1. Пользователь-"Чтение" может:
    1. просматривать список работ шахматки.
        1. все элементы управления (кнопки, чекбоксы, пр.) для него залочены.
    2. просматривать пользовательский список работ владельца шахматки:
        1. все элементы управления (кнопки, чекбоксы, пр.) для него залочены;
2. Пользователь-"Владелец" и пользователь-"Редактор" могут совершать эквивалентные действия по отношению к списку работ шахматки.
3. Пользователь-"Редактор" видит при настройке чужой шахматки чужой пользовательский список (список владельца).
4. Каждый пользователь может управлять своим пользовательским списком только при работе в своих шахматках.
5. Пользователь-"Владелец" и пользователь-"Редактор" могут:
    1. просматривать **список работ шахматки**:
        1. список работ шахматки поддерживает иерархическую структуру - пока доступен только один уровень вложенности папок (ранее это был "вид работ"; "этапов" больше нет).
    2. просматривать **пользовательский список работ** владельца шахматки:
        1. пользовательский список работ является плоским списком без иерархии.
    3. выбирать одну или несколько работ в пользовательском списке работ для массового добавления в список шахматки;
    4. выбирать одну или несколько работ в списке работ шахматки (для удаления, для перемещения):
        1. при удалении: если наименование работ используется в шахматке (есть связанные с ним работы), возникает модалка "Внимание! Все равно удалить?":
            1. При этом строки в таблице task не удаляются, у них только в поле work_id проставится null.
            2. Это так потому, что строки из таблицы work удалять тоже не нужно.
            2. 
            3. Если удаляется связанное помещение, то таска тоже удаляется.
            4. А работа по-настоящему удаляться не умеет. Но. Если ее удалить мягко, в то же помещение может успеть поселиться новая работа? так в чем проблема, пусть она пишется в существующую там таску? Почему так не должно быть?
            5. 
        2. при перемещении межд
    5. если в списке работ шахматки выбрано несоколько чекбоксов с работами или видами работ, это никак не влияет на процессы:
        1. при работе с кнопкой "Создать" ("Работу", "Вид работ");
        2. при работе с кнопкой "Список" ("Клонирование списка работ из другой шахматки", "Экспортировать в файл (xlsx)", "Импортировать из файла", "Очистить список")
    5. система никак не препятствует сводобному выбору работ одновременно в двух частях экрана - это разные списки;
    3. создавать новую работу непосредственно в списке шахматки:
        1. имя новой работы уникально для списка работ пользователя (и, соответственно, его подмножества - списка работ шахматки).
    4. создавать новую пустую группу работ (папку) в списке работ шахматки:
        1. имя новой группы работ уникально для списка работ шахматки.
    6. настраивать список работ шахматки (перетаскивать наименования работ между правой и левой областями интерфейса):
        1. переносить работы из пользовательского списка в список шахматки с помощью кнопки "Добавить в шахматку":
            1. перемещенное наименование работы попадает в корень струтуры "Список работ шахматки".
            2. при переносе работы она перестает отображаться в старой области и начинает отображаться в новой;
        2. переносить работы из списка шахматки в пользовательский список с помощью кнопки "Удалить";
            1. при переносе работы она перестает отображаться в старой области и начинает отображаться в новой;
        3. переносить наименования работ в списке шахматки между разными уровнями вложенности:
            1. из произвольной комбинации расположений в группу работ на выбор (в папку);
            2. из произвольной комбинации расположений в корень.

    8. выбирать несколько работ в списке шахматки для массовых действий:
        1. перенос всех выбранных в **списке работ шахматки** наименований в **пользовательский список работ** (массовое "Удалить"):
            1. старые галки чекбоксов в пользовательском списке снимамются;
            2. только что удаленным из шахматки работам проставляются заполненные галками чекбоксы.
        2. переноc всех выбранных в **списке работ шахматки** наименований внутри списка (массовое "Переместить"):
            1. из одной группы работ в другую;
            2. из корня в группу работ;
            3. из группы работ в корень.
    9. 
    8. Выбирать группы работ (папки):
        1. проставляются чекбоксы всем наименованиям работ внутри папки
    9. При выборе всех наиименований работ внутри одной папки, папка тоже считается выбранной (проставляем чекбокс).
    10. При частичном выборе наименований работ внутри папки  
    10. Раскрытая папка визуально отличается от свернутой.
    11. 
    
    осуществлять быстрый поиск/фильтрацию по работам:
        - в списке пользователя
        - в списке шахматки
    9. фыва 
6. Редактировать работы пока что никто не может
7. Пользователь может скопировать список работ если у него есть хоть какой-то доступ к шахматке. При этом как-бы берутся и все работы слева, и все работы справа.
8. В ряде случаев возникают нотификации:


пользователь может скоммуниздить плоский пользовательский список из любой шахматки, куда он имеет доступ, но только если он влаеделец или редактор?

1. При создании нового пользователя для него создается сущность "пользовательский список работ" и в него кладется "дефолтный список работ" (сам список тут).
2. При перетаскивании у работы она перестает отображать в том списке, где ранее была и начинает там, где ранее не отображалась
1. При переходе в шахматку: если список работ этой шахматки не настроен, система предлагает пользователю его настроить (создать), т.е. для каждой шахматки пользователь создает отдельный список работ шахматки.
2. При переходе в шахматку: если список работ этой шахматки настроен, пользователь может отредактировать список работ шахматки.
3. Пользователь может редактировать свой пользовательский список работ через раздел "список работ" в любой из шахматок, для которой он является владельцем.

5. При переходе в раздел "список работ" 
2. Пользовательский список работ доступен пользователю на всех его шахматках сквозным образом.
3. В списке работ шахматки, к которой пользователю выдали доступ на чтение или редактирование, он видит пользовальский список работ **владельца** шахматки.
4. Их можно собирать в группы
6. Их можно удалять вместе с группами
7. 

#### Первый вход в раздел "Список работ":

3. По дефолту на старте настройки "Списка работ" пользователь-"владелец" видит в области дефолтного справочника наименования работ, 


 распределение наименований работ между двумя справочниками п
4. Как переводить добавлять работы в список работ? Если работа была добавлена в правую половину экрана, то он больше не отображается в списке слева.
5. Как удалять работы из списка работ?
6. Какие действия со справочником доступны для пользователя "_владельца_"/"_редактора_"/"_просмотрщика_"?
7. Какие данные подтягиваются для дефолтного справочника если пользователь - "_владелец_"/"_редактор_"/"_просмотрщик_" шахматки?

### Функциональные требования на потом

1. Пользователь может редактировать наименования работ (внутри справочника работ шахматки или внутри пользовательского списка работ)
2. Пользователь может удалять наименования работ.
3. У пользователя не может быть 0 объектов (шахматок):
    - пользователь на старте работы всегда получает демо-проект;
        - при создании демо-проекта в его шахматку в список работ кладется дефолтный список работ (**ссылка на данные**).
    - пользователь может создавать новые объекты;
    - пользователь может удалять свои объекты, если их больше 1 (корзинка?);
    - пользователь не может удалить последний объект (шахматку).
4.     - редактировать работы внутри справочника работ шахматки 



### User Stories

1. 
2. 

### Use-cases

1. 
2. 

### Дополнительные материалы:

1. Дефолтный список работ для пользователя (плоский). - тут ссылка на файл.
