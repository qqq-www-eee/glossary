### Требования к отображению информации о пользователях и контактах

Контакты - это технадзоры, исполнители.

<br>

В системе должно быть представлено две сущности - **пользователь** и **контакт**.
  - **Пользователь** - сущность системы, соответствующая реальному человеку, который зарегистрировался в системе и использует продукт в работе.
  - **Контакт** - сущность системы, не являющаяся зарегистрированным/авторизованным пользователем и соответствующая определенному человеку (исполнителю, технадзору, др.), с которым пользователь взаимодействует в реальной жизни.  

    <br>

---

<br>

1. Набор атрибутов **пользователя** ( * - обязательные):
   1. Номер телефона *
   2. ФИО (одним полем) *
   3. email
   4. Телеграм
   5. Должность
   6. ~~Фото~~ (потом)
   
   <br>

   ~~+ служебные, uuid~~

   <br>

2. Телефон пользователя указывается будущим пользователем при регистрации.

3. ФИО указывается будущим пользователем при регистрации (после ввода корректного СМС-кода система запрашивает "Как вас зовут?" или похожее).

4. Пользователь может не указывать свое ФИО при регистрации, тогда полю ФИО присваивается значение по умолчанию "Пользователь Платформы".

6. Все атрибуты пользователя могут быть изменены самим пользователем в разделе "Учетная запись".

7. Обязательные атрибуты пользователя (*) невозможно удалить или оставить пустыми.

8. Необязательные атрибуты пользователя возможно очистить.

9. Ограничение на длину поля "ФИО" для пользователя - 255 символов.

10. "Номер телефона" пользователя имеет формат 7********** (11 символов). Вообще, телефоны бывают до 14 символов длиной, но у них другие коды; сейчас работаем только с международными кодами +7 (российскими / казахскими / абзахскими).

11. "email" пользователя должен иметь формат %@%.% , длина строки не более 255 символов.

12. Длина имени пользователя телеграм 5–32 символов.

13. Должность - одна из списка (сокращения ок):

| Должность          |
| ------------------ |
| Прораб             |
| Технадзор          |
| Мастер участка     |
| Инженер ПТО        |
| Начальник участка  |
| Сметчик            |
| Бригадир           |
| Рабочий            |

14. ~~Фото - ссылка на файл, загруженный на сторонний S3-сервер. Имеет параметры:~~
    - ~~квадратный форм-фактор~~
    - ~~размер изображение 600*600px~~
    - ~~размер на диске - 300Кб (ориентировочно)~~
    - ~~формат jpeg.~~
    
    <br>

15. ~~Система дает пользователю возможность прикрепить изображение к своему профилю в разделе "Учетная запись", но центрирует, обрезает и сжимает фото и конвертирует в нужный формат самостоятельно.~~

16. **Пользователей невозможно добавить в списки шахматок.**

<br>

---

<br>

1. Набор атрибутов **контакта** ( * - обязательные):
   1. Номер телефона *
   2. ФИО (одним полем) *
   3. email
   4. Телеграм
   5. Должность
   6. Комментарий  
   7. Владелец контакта (uuid) *
   8. Ссылка на пользователя (если есть)
   9. Идентификатор справочника 1С "Исполнитель"

   <br>

   ~~+ служебные, uuid~~

   <br>

2. Система предоставляет каждому **пользователю** возможность вести "список контактов" (удобная аналогия - "телефонная книга") - т. е., создавать, редактировать, просмативать и удалять **контакты**.

3. При редактировании списка контактов поля контакта "Номер телефона" и "ФИО" вводятся пользователем вручную обязательно (нельзя оставить пустыми).

4. Контакт всегда относится к определенному пользователю. Принадлежность к пользователю изменить невозможно.

5. Поля контакта 3-6 и 8-9 могут быть или стать пустыми.

6. Если человек пользуется несколькими номерами телефонов, для каждого из них в системе потребуется создать отдельный контакт (пусть даже ФИО и др. данные совпадают).

7. Один и тот же человек может быть записан как контакт несколько раз у разных пользователей (эквивалентно: номер телефона как контакт может встретиться в системе более одного раза).

8. Один и тот же человек может быть записан в контактах у одного пользователя не более одного раза (номер может быть записан как контакт у конкретного пользователя только единожды).

9. Система предоставляет **пользователю** возможность добавлять **свои контакты** в список шахматки "Исполнители".

10. Система предоставляет **пользователю** возможность добавлять **свои контакты** в список шахматки "Технадзор".
 
11. Изменение атрибутов пользователя не отражается на его контактах у других пользователях

12. И **контакты**, и **пользователи** соответствуют реальным людям и предназначены для поддержания коммуникации, поэтому, атрибуты "ФИО" и "Телефон" у обеих сущностей являются обязательными полями.---ф

13. 6. Номер телефона пользователя всегда виден другим пользователям (кейс: карточка с контактами и именами и т. д.).

14. Контакт можно вносить в список шахматки "Технадзоры".

15. Когда в системе регистрируется новый пользователь и происходит первично добавление его данных в БД, система должна проити по списку всех контактов всех других пользователей и проставить им ссылку на данного нового зарегитрировавшегося пользователя.



экспорт импорт
руками пользователя импортировать из другой шахматки

5. Ограничение на длину поля ФИО в контакте - 255 (отражаться в шахматке будут только 15 или по ширине, будет уточнено в отдельных требованиях)
  
8. Отдельная ссылка на пользователя не нужна?