### Требования к отображению информации о "пользователях" и "контактах"

Пример контактов - люди в списках технадзоров, исполнителей.

<br>

В системе представлено две сущности - **пользователь** и **контакт**.
  - **Пользователь** - соответствует реальному человеку, который зарегистрировался в системе и использует продукт в работе.
  - **Контакт** - не является зарегистрированным/авторизованным пользователем и соответствует определенному человеку (исполнителю, технадзору, др.), с которым пользователь взаимодействует в реальной жизни.  

    <br>

---

<br>

1. Набор атрибутов **пользователя** ( * - обязательные):
   1. Номер телефона *
   2. ФИО (одним полем) *
   3. email
   4. Телеграм
   5. Должность
   6. ~~Фото (потом)~~

   ~~+ служебные, uuid~~

   <br>

2. Телефон пользователя указывается пользователем при регистрации.

3. ФИО указывается пользователем при регистрации, после ввода корректного СМС-кода, по запросу системы "Как вас зовут?" (или похожее).

4. Пользователь может не указывать ФИО при регистрации, тогда полю ФИО присваивается значение по умолчанию "Пользователь Платформы".

6. Все атрибуты пользователя могут быть изменены им в разделе "Учетная запись".

7. Обязательные атрибуты пользователя (*) невозможно удалить или оставить пустыми.

8. Необязательные атрибуты пользователя возможно сделать пустыми.

9. Ограничения на поля сущности пользователь:
   1. "Номер телефона" пользователя имеет формат 7********** (11 символов). Вообще, телефоны бывают до 14 символов длиной, но с другими кодами; сейчас работаем только с международными кодами +7 (РФ / Казахскими / Абхазия).
   2. на длину поля "ФИО" для пользователя - 255 символов.
   3. "email" формата %@%.% , длина строки не более 255 символов.
   4. Длина имени в телеграм 5–32 символов.
   5. Должность - одна из списка:

<br> 

| Должность          |
| ------------------ |
| Прораб             |
| Технадзор          |
| Мастер участка     |
| Инженер ПТО        |
| Начальник участка  |
| Сметчик            |
| Бригадир           |
| Рабочий            |

<br>

-
  6. ~~Фото - ссылка на файл, загруженный на сторонний S3-сервер. Имеет параметры:~~
      - ~~квадратный формфактор~~
      - ~~размер изображение 600*600px~~
      - ~~размер на диске - 300Кб~~
      - ~~формат jpeg.~~

      <br>

  7. ~~Система дает пользователю возможность прикрепить изображение произвольного расширения, разрешения, размера и пр. к своему профилю в разделе "Учетная запись", однако центрирует, обрезает, сжимает фото и конвертирует его в нужный формат самостоятельно.~~

<br>

10. Система предоставляет каждому **пользователю** возможность управлять "списком контактов" (по аналогии с "телефонной книгой") - создавать, редактировать, просмативать и удалять **контакты**.

11. Система предоставляет **пользователю** возможность добавлять **свои контакты** в список шахматки "Исполнители".

12. Система предоставляет **пользователю** возможность добавлять **свои контакты** в список шахматки "Технадзор".

13. **Пользователей невозможно добавить в списки шахматок.**

14. Если человек пользуется несколькими номерами телефонов, для каждого из них в системе потребуется создать отдельный контакт.

15. Один и тот же человек может быть записан в системе несколько раз - как контакт у разных пользователей (эквивалентно: номер телефона как контакт может встретиться в системе более одного раза).

16. Один и тот же человек записан в контактах у конкретного пользователя не более одного раза (эквивалентно: номер телефона как контакт у конкретного пользователя уникален).


<br>

---

<br>

1. Набор атрибутов **контакта** ( * - обязательные):
   1. Номер телефона *
   2. ФИО (одним полем) *
   3. Должность
   4. Комментарий  
   5. Владелец контакта (uuid) *
   6. Ссылка на пользователя (uuid, если есть)
   7. ~~Идентификатор справочника 1С "Исполнитель"~~

   <br>

   ~~+ служебные, uuid~~

   <br>

2. При редактировании списка контактов вручную поля "Номер телефона" и "ФИО" вводятся пользователем обязательно (нельзя оставить пустыми).

3. Контакт всегда относится к определенному пользователю. Принадлежность к пользователю невозможно изменить без удаления всего контакта.

4. Поля контакта 3, 4, 8, 9 могут быть опущены.

5. Ограничения на поля для контактов в точности соответствуют ограничениям на аналогичные поля для пользователей, а именно:
  - "Номер телефона" пользователя имеет формат 7********** (11 символов).
  - Максимальная длина строки "ФИО" - 255 символов.
  - "Должность" - одна из списка (как у пользователей)
  - "Комментарий" - ограничение 255 символов.

<br>

---

<br>

1. Контакт можно при желании сделать пользователем.

8. Изменение атрибутов пользователя не отражается на его контактах у других пользователях

9. Номер телефона как у пользователя, так и у контакта всегда виден другим пользователям (кейс: карточка с контактами и именами и т. д.).

15. Когда в системе регистрируется новый пользователь и происходит первично добавление его данных в БД, система должна проити по списку всех контактов всех других пользователей и проставить им ссылку на данного нового зарегитрировавшегося пользователя.



экспорт импорт
руками пользователя импортировать из другой шахматки

5. Ограничение на длину поля ФИО в контакте - 255 (отражаться в шахматке будут только 15 или по ширине, будет уточнено в отдельных требованиях)
  
8. Отдельная ссылка на пользователя не нужна?