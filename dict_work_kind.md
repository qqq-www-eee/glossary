### Настройка списка работ (списка "Работы")  

<br>

**Работы** - перечень строительных работ, доступных на данном объекте.   

Система предоставляет пользователю возможность _создавать_, _просматривать_, _редактировать_ и _удалять_ _**список доступных работ**_ (плоский список), а также формировать из числа его элементов _**список работ на объекте**_ (доступны для учёта в шахматке, поддерживают уровни вложенности).  
<br>

<img width="727" alt="image" src="https://user-images.githubusercontent.com/122552428/212556648-078c9611-9280-40ef-baaf-ca7692968db7.png">

_Иллюстрация: "Список работ на объекте"_

<br>

**Создание списка доступных работ**

1. Для каждого объекта, расположенного в главном меню, пользователь имеет возможность создать _**список доступных работ**_:  
    1. Если к объекту не приклеплено работ, система отобразит стартовый экран с предложением заполнить список работ; 
    2. Если к объекту приклеплена хотя бы одна работа, перед загрузкой новых работ из ~~файла~~ / шаблона / другой шахматки система всегда предлагает пользователю подтвердить действие (заменить уже существующие работы? / ~~добавить новые работы в существующий список~~);
    3. Требования к уникальности имени: если при вводе наименования работы вручную ~~или при загрузке из файла~~ встетилось уже используемое наименование работы:
        1.  вручную: ошибка поля: "Данное наименование работы уже используется" - пользователь не может добавить работу, пока не изменит введенное в поле значение;
        2.  ~~из файла: система самостоятельно пропускает повторы.~~
2. Пользователь может создавать список работ:
    1. ~~из файла ТКП (технико-коммерческое предложение):~~  
        1. ~~Будет реализовано, когда будет понимание структуры ТКП, требования к уникальнсоти полей и пр.~~  
    2. вручную; при нажатии на соответствующий элемент интерфейса система:  
        1. запросит **наименование работы** и **единицы измерения**;  
        2. добавит одну новую работу в существующий _**список доступных работ**_ согласно алфавитному порядку;  
        3. новая работа по умолчанию получает статус "выбрана".  
    3. склонировав список работ из другой шахматки:  
        1. пользователь может клонировать список работ только из тех шахматок, список работ в которых не пустой;
        2. пользователь может клонировать список работ из своих шахматок и из шахматок других пользователей, к которым имеет доступ: 
            1. при выборе шахматки для клонирования свои шахматки и чужие визуально раздлены; свои шахматики должны быть более доступны (отображаться выше);
            2. при выборе шахматки для клонирования списка работ должны отображаться:  
                - Название шахматки (должно стать уникальным для пользователя?),  
                - Автор шахматки (это позволит различить три шахматки "Без названия").  
                - ~~совокупное число доступных работ~~ ;
            3. По умолчанию управляющий элемент (дропдаун/мультиселект/др.) не заполнен. 
     <br>
     
3. Работы импоритируются из ~~файла~~ / шаблона / другой шахматки в одном из двух режимов: со структурой групп (см. _**"Работы на объекте"**_) или как плоский список (система уточняет у пользователя):
    1. в режиме плоского списка импортируются только _**список доступных работ**_:
        1. элементы в плоском списке _**список доступных работ**_ отсортированы в алфавитном порядке. 
    3. для списка со структурой групп импортируется как _**список доступных работ**_, так и _**список работ на объекте**_:
        1. вместе со структурой группировок _**списка работ на объекте**_;
        2. автоматически структуры групп не мерджатся - пользователь делает это при необходимости вручную;
        3. элементы в _**списке доступных работ**_ и в корне _**списка работ на объекте**_ отсортированы в алфавитном порядке.
4. После создания списка доступных работ все новые элементы в нем по умолчанию получают статус "выбрана".
 
<br>

#### Формирование списка "Работы на объекте" (группировка / редактирование / разгруппировка)

_**Работы на объекте**_ будут доступны для отображения в шахматке объекта.

1. Система даёт возможность:
    1. создавать и пополнять _**список работ на объекте**_ элементами из _**списка доступных работ**_:
        1. если новая работа добавляется в _**список работ на объекте**_, она попадает в корень списка;
        2. новая работа может быть добавлена в _**список работ на объекте**_, даже если в списке данная работа уже где-то представлена. 
    3. удалять элементы из _**списка работ на объекте**_, если они еще не были использованы в шахматке;
        1. если элемент из _**списка работ на объекте**_ уже был назначен в работу (использован в шахматке), ошибка.
    5. группировать элементы _**списка работ на объекте**_ в группу работ,
        1. группа может содержать одну или 0 работ;
    6. группировать группы работ в группу следующего уровня;
    7. перемещать элементы _**списка работ на объекте**_:
        1. между группами одной степени вложенности,
        2. между группами разной степени вложенности (в том числе выносить работу в корень списка);
    8. ~~перемещать группы _**списка работ на объекте**_:~~
        1. ~~между группами одной степени вложенности,~~
        2. ~~между группами разной степени вложенности (в том числе класть группу в корень списка);~~
    10. упразднять группу.
<br>

#### Просмотр списка доступных работ. Просмотр списка работ на объекте

**Доступные работы**:
1. Система предоставлять пользователю возможность просматривать _**список доступных работ**_ с отображением:
    1. наименования каждой работы,
    2. числа всех доступных работ (агрегирующий параметр).
2. Система предоставляет пользователю возможность быстро **выбрать все работы** и **снять выбор всех работ**:
    1. на корневом уровне _**cписка доступных работ**_ (плоский список, других уровней у него нет);
3. Система предоставляет пользователю возможность осуществлять "Быстрый поиск" работ по _**списку доступных работ**_. Во время поиска:
    1. для каждой найденной работы отображается текущий статус элемента списка - "выбрана" / "не выбрана".  

**Работы на объекте**:
1. Система предоставлять пользователю возможность просматривать _**список работ на объекте**_ с отображением:
    1. наименования каждой работы,
    2. числа работ работ на объекте (агрегирующий параметр).
2. Система предоставляет пользователю возможность быстро **выбрать все работы** и **снять выбор всех работ**:
    1. на корневом уровне _**списка работ на объекте**_ (выбор всех работ, отображаемых в шахматке);
    2. в рамках одной или нескольких групп работ;
    3. система даёт возможность выбирать отдельные работы для действий.
3. Система должна предоставлять пользователю возможность осуществлять "Быстрый поиск" работ по _**списку работ на объекте**_. Во время поиска:
    1. для каждой найденной работы отображается текущий статус работы - "выбрана" / "не выбрана";
    2. если в группе работа есть работа, имя которой имеет совпадение с запросом поисковой строки, отображать всю группу. 
<br>

#### Редактирование списка доступных работ

1. Система предоставляет пользователю возможность объединить два и более списка работ в один ~~(через модалку при добавлении работ)~~ через отдельную функциональность. Работы импоритируются из ~~файла~~ / шаблона / другой шахматки в одном из двух режимов: со структурой групп (см. _**"Работы на объекте"**_) или как плоский список (система уточняет у пользователя):
    1. в режиме плоского списка импортируются только _**список доступных работ**_:
        1. элементы в плоском списке _**список доступных работ**_ добавляются в существующий список согласно алфавитному порядку. 
    3. для списка со структурой групп импортируется как _**список доступных работ**_, так и _**список работ на объекте**_:
        1. вместе со структурой группировок _**списка работ на объекте**_;
        2. автоматически структуры групп не мерджатся - пользователь делает это при необходимости вручную;
        3. элементы в _**списке доступных работ**_ и в корне _**списка работ на объекте**_ отсортированы в алфавитном порядке.
2. По умолчанию все вновь добавленные работы получают статус "выбрана".   
<br>

3. Для каждой работы в списке доступных работ пользователь может изменить параметры:
    1. название работы,
    2. единицы измерения.
4. Система должна иметь защиту от внесения случайных изменений в параметры работ (подтверждение).
5. Для каждой работы в списке доступных работ пользователь может создать копию работы с генерацией нового имени работы (напр., "поклейка обоев (копия)") 

#### Удаление списка доступных работ

1. Система должна предоставлять пользователю возможность удалить выбранные работы из _**списка доступных работ**_. При нажатии на соответствующий элемент интерфейса система:  
    1. запросит подтверждение об удалении для пользователя;  
    2. при подтверждении удалит работу из _**списка доступных работ**_ (это не окажет влияния на _**списка работ на объекте**_).




