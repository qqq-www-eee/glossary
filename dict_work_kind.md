### Настройка списка работ (списка "Работы")  

<br>

**Работы** - перечень строительных работ, доступных на данном объекте.   

Система предоставляет пользователю возможность _создавать_, _просматривать_, _редактировать_ и _удалять_ _**списку доступных работ**_ (плоский список), а также формировать из числа его элементов _**список работ на объекте**_ (доступны для учёта в шахматке, поддерживают уровни вложенности).  
<br>

<img width="727" alt="image" src="https://user-images.githubusercontent.com/122552428/212556648-078c9611-9280-40ef-baaf-ca7692968db7.png">

_Иллюстрация - структура "Список работ на объекте"_

<br>

**Создание списка доступных работ**

1. Для каждого объекта, расположенного в главном меню, пользователь должен иметь возможность создать список работ:  
    1. Если к объекту не приклеплено работ, система отобразит стартовый экран с предложением заполнить список работ; 
    2. Если к объекту приклеплена хотя бы одна работа, перед загрузкой новых работ из файла / шаблона / другой шахматки система всегда предлагает пользователю подтвердить действие (заменить уже существующие работы / ~~добавить новые работы в существующий список~~ / отмена):
        1. По умолчанию все вновь добавленные работы получают статус "выбрана".   
    3. Требования к уникальности имени: если при вводе наименования работы вручную ~~или при загрузке из файла~~ встетилось уже используемое наименование работы:
        1.  вручную: ошибка поля: "Данное наименование работы уже используется" - пользователь не может добавить работу, пока не изменит имя работы;
        2.  ~~из файла: система самостоятельно пропускает повторы;~~
2. Пользователь может создавать список работ:
    1. ~~из файла ТКП (технико-коммерческое предложение):~~  
        1. ~~Будет реализовано, когда будет понимание структуры ТКП~~  
    2. вручную. При нажатии на соответствующий элемент интерфейса система:  
        1. запросит **наименование работы** и **единицы измерения**;  
        2. добавит одну новую работу в существующий список доступных работ согласно алфавитному порядку;  
        3. новая работа по умолчанию получает статус "выбрана".  
    3. склонировав список работ из другой шахматки:  
        1. пользователь может клонировать список работ из своих шахматок и из шахматок других пользователей, к которым имеет доступ; 
            1. при выборе шахматки для клонирования свои шахматки и чужие визуально раздлены 
        3. пользователь может клонировать список работ только из тех шахматок, список работ в которых не пустой;  
        4. при выборе шахматки для клонирования списка работ должны отображаться:  
            - Название шахматки (должно стать уникальным для пользователя?),  
            - Автор шахматки (позволит различить три шахматки "Без названия").  
            - ~~совокупное число доступных работ.~~  
            - Шахматки пользователя должны быть визуально отделены от Шахматок, к которым у пользователя есть доступ. Шахматики пользователя должны быть более доступными (отображаться выше);
            - По умолчанию дропдаун не заполнен. 
        5. После создания списка доступных работ все элементы в нем по умолчанию получают статус "выбрана".  
<br>

#### Формирование списка "Работы на объекте" (группировка / редактирование / разгруппировка)

Работы на объекте будут доступны для отображения в шахматке объекта.

1. Система предоставляет возможность:
    1. создавать и пополнять _**список работ на объекте**_ элементами _**списка допустимых работ**_ путем проставления последним статусов "выбрана" (т.е. добавлять элементы в корень структуры _**список работ на объекте**_);
        1. если новая работа добавляется в список работе на объекте, то она попадёт в корень списка работ на объекте;
        2. если в списке работ на объекте где-то уже встречается работа 
    3. удалять элементы из _**списка работ на объекте**_ путем проставления работе статуса "не выбрана"
    4. группировать элементы _**списка работ на объекте**_ в группу работ,
        1. группа может содержать одну или 0 работ;
    5. группировать группы работ в группу следующего уровня;
    7. перемещать элементы _**списка работ на объекте**_:
        1. между группами одной степени вложенности,
        2. между группами разной степени вложенности (в том числе класть работу в корень списка);
    8. ~~перемещать группы _**списка работ на объекте**_:~~
        1. ~~между группами одной степени вложенности,~~
        2. ~~между группами разной степени вложенности (в том числе класть группу в корень списка);~~
    10. упразднять группу;
<br>

#### Просмотр списка доступных работ и списка работ на объекте

Доступные
1. Система предоставлять пользователю возможность просматривать _**список доступных работ**_ с отображением:
    1. наименований каждой работы,
    2. числа всех доступных работ (агрегирующий параметр),
2. Система предоставляет пользователю возможность быстро **выбрать все работы** и **снять выбор всех работ**:
    1. на корневом уровне _**cписка доступных работ**_ (плоский список, и других уровней у него нет);
3. Система должна предоставлять пользователю возможность осуществлять "Быстрый поиск" работ по _**списку доступных работ**_. Во время поиска:
    1. для каждой найденной работы отображается текущий статус работы - "выбрана" / "не выбрана" для работы на объекте; 
<br>

На объекте
1. Система предоставлять пользователю возможность просматривать _**список работ на объекте**_ с отображением:
    1. наименований каждой работы,
    2. числа работ в статусе "выбрана" (агрегирующий параметр).
2. Система предоставляет пользователю возможность быстро **выбрать все работы** и **снять выбор всех работ**:
    1. на корневом уровне _**списка работ на объекте**_ (выбор всех работ, отображаемых в шахматке);
    2. в рамках группы работ;
    3. система предоставляет пользователю возможность выбирать отдельные работы для действий.
3. Система должна предоставлять пользователю возможность осуществлять "Быстрый поиск" работ по _**списку работ на объекте**_. Во время поиска:
    1. для каждой найденной работы отображается текущий статус работы - "выбрана" / "не выбрана" для дальнейших действий;
    2. если в группе работа есть работа, имя которой имеет совпадение с запросом поисковой строки, отображать всю группу. 
<br>

#### Редактирование списка доступных работ

1. Система должна предоставлять пользователю возможность объединить два и более списка работ в один (через модалку при добавлении работ либо через отдельную функциональность);
    1. работы импоритируются из файла / шаблона/ другой шахматки
        1. с сохранением статусов "выбрана";
        2. вместе с их структурой группировок;
        3. автоматически структуры групп не мерджатся - пользователь делает это при необходимости вручную;
        4. элементы в плоском списке _**список доступных работ**_ и в корне _**списка работ на объекте**_ отсортированы в алфавитном порядке.
2. Для каждой работы в списке доступных работ пользователь может изменить параметры:
    1. название работы,
    2. единицы измерения.
    3. Система должна иметь защиту от внесения случайных изменений в параметры работ (модалка).
3. Для каждой работы в списке доступных работ пользователь может создать копию работы с новым именем работы (напр., "поклейка обоев (копия)")
<br>

#### Удаление списка доступных работ

<br>

1. Система должна предоставлять пользователю возможность удалить выбранные работы из _**списка доступных работ**_. При нажатии на соответствующий элемент интерфейса система:  
    1. запросит подтверждение об удалении для пользователя;  
    2. при подтверждении удалит работу из _**списка доступных работ**_ (это не окажет влияния на _**списка работ на объекте**_).




